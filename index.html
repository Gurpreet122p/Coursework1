<!DOCTYPE html>
<html>

<head>
    <title>Courswork 1 Gur Preet Singh Kaur</title>

    <!-- Vue development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="./assets/design.css">

    <!-- Lesson objects -->
    <script src="assets/lessons.js"></script>
    <!-- Font=Awesome library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

</head>

<body>

    <div id="app">
        <div v-if='showProduct'>
            <!-- product page code -->

            <!-- Sorting Options -->
            <div id="sort">
                <p>Sort by</p>
                <div v-for="(selectedValue, key) in sorting">

                    <input type="radio" id="key" name="key" value="selectedValue" v-on:click='sortBy(selectedValue)'>
                    <label for="key"> {{key}}</label><br>
                </div>

                <p>
                    <strong>Order:</strong>
                    <select v-model="orderAscending">
            <option disabled value="">Order By</option>
            <option v-for="(selectedValue, key) in userOrder" v-on:change='ss' v-bind:value="selectedValue">
                {{selectedValue}}
        </select>
                </p>
            </div>

            <div class="contain">

                <div class="prod_box" v-for="lesson in lessons">
                    <!-- lesson information -->
                    <h2 v-text="lesson.subject"> </h2>
                    <img v-bind:src="lesson.image" height="125">
                    <p v-text="lesson.location"> </p>
                    <p>Price:Â£{{lesson.price}}</p>
                    <p>Available:{{lesson.availableInventory}}</p>
                    <!-- Font Awesome generated icons -->
                    <div>
                        <span v-for='n in lesson.rating'><i class="fas fa-star"></i></span>
                        <span v-for='n in 5-lesson.rating'><i class="far fa-star"></i></span>

                    </div>
                    <!-- Button for adding lesson to cart -->
                    <button v-on:click='addToCart(lesson)' v-if='lesson.availableInventory'>
                    Add to cart
                    </button>
                    <!-- Disable Button for adding lesson to cart when required-->
                    <button disabled='disabled' v-else>
                        Add to cart
                    </button>
                    <span v-if='lesson.availableInventory < 1'>
                        All out!
                    </span>
                    <span v-else-if="lesson.availableInventory  < 5 ">
                        Only {{lesson.availableInventory }} left!
                    </span>
                    <span v-else>Buy Now</span>
                </div>
            </div>
        </div>
        <!-- Finish Div for showing lessons -->

        <div v-else>
            <!-- checkout page code -->

        </div>

    </div>

    </div>


</body>

</html>

<script>
    let app = new Vue({

            el: '#app',
            data: {
                showProduct: true,
                lessons: allLessons,
                userOrder: {
                    a: 'Ascending',
                    b: 'Descending'
                },
                sorting: {
                    Price: 'price',
                    Subject: 'subject',
                    Location: 'location',
                    Availability: 'availableInventory'
                },
                userSelection: '',
                orderAscending: ''

            },



            methods: {
                sortBy(scenario) {
                    if (scenario === "price") {
                        function compare(a, b) {
                            if (a.price > b.price) return 1;
                            if (a.price < b.price) return -1;
                            return 0;
                        }
                        this.orderAscending = "Descending"
                        return this.lessons.sort(compare);
                    } else if (scenario === "availableInventory") {
                        function compare(a, b) {
                            if (a.availableInventory > b.availableInventory) return 1;
                            if (a.availableInventory < b.availableInventory) return -1;
                            return 0;
                        }
                        this.orderAscending = "Descending"
                        return this.lessons.sort(compare);
                    } else if (scenario === "location") {
                        function compare(a, b) {
                            if (a.location > b.location) return 1;
                            if (a.location < b.location) return -1;
                            return 0;
                        }
                        this.orderAscending = "Descending"
                        return this.lessons.sort(compare);
                    } else if (scenario === "subject") {
                        function compare(a, b) {
                            if (a.subject > b.subject) return 1;
                            if (a.subject < b.subject) return -1;
                            return 0;
                        }
                        this.orderAscending = "Descending"
                        return this.lessons.sort(compare);
                    }
                }
            },

            computed: {

                ss() {
                    if (this.orderAscending === "Ascending") {

                        this.orderAscending = "Ascending"

                        return this.lessons.reverse();

                    } else if (this.orderAscending === "Descending") {
                        this.orderAscending = "Descending"
                        return this.lessons.reverse();

                    } else {
                        return this.lessons;
                    }


                },

            }


        },

    );
</script>
